# -*- coding: utf-8 -*-
# بوت تيليغرام: موسوعة الألتراس — شروحات مفصلة دون نقصان
# متوافق مع pyTelegramBotAPI (telebot) — مناسب لـ Pydroid3 على الأندرويد

import telebot
from telebot import types
import datetime
import json
from apscheduler.schedulers.background import BackgroundScheduler
# -----------------------------------------------------------------------------
# جدول مباريات الحراش
# -----------------------------------------------------------------------------
import requests
import datetime

TEAM_ID_SOFA = 45002  # ID فريق USM El Harrach في Sofascore

import datetime

def next_match_manual():
    match_date = datetime.datetime.strptime("20/09/2025 16:00", "%d/%m/%Y %H:%M")
    return {
        "opponent": "بشار الجديد",
        "date": match_date,
        "location": "ملعب اتحاد الحراش"
    }#
# توكن البوت (أنت وفرته)
TOKEN = "8198687360:AAFdYphDAlsiC4FsBbfGjGeQ0cQFusuJI5w"
bot = telebot.TeleBot(TOKEN, parse_mode=None)  # بدون Markdown لتفادي أخطاء الطول

# -----------------------------------------------------------------------------
# دالة مساعدة: تقسيم وإرسال نصوص طويلة على دفعات (تيليغرام يسمح ~4096 حرف/رسالة)
# -----------------------------------------------------------------------------
def send_long(chat_id, text):
    limit = 3800  # هامش أمان أقل من 4096
    t = text.strip()
    while t:
        if len(t) <= limit:
            bot.send_message(chat_id, t)
            break
        # نحاول نقص على حدود فقرة/سطر باش ما نقطعش الكلام
        cut = t.rfind("\n\n", 0, limit)
        if cut == -1:
            cut = t.rfind("\n", 0, limit)
        if cut == -1:
            cut = limit
        part = t[:cut].strip()
        bot.send_message(chat_id, part)
        t = t[cut:].strip()

# -----------------------------------------------------------------------------
# المحتوى المفصل — 10 أساليب
# -----------------------------------------------------------------------------

TEXT_TORSO = """🩳 أسلوب: نزع التيشرتات (Torso Nudo)

📜 الوصف المفصل:
- لحظة جماعية كي يرفع/ينزع فيها الجمهور التيشرتات مع صرخة موحّدة أو لازمة غنائية. يتزامن غالبًا مع بداية الشوط الثاني، بعد هدف، أو عند “ذروة” التشجيع.
- الصورة المقصودة: مدرج يبدو ككتلة بشرية واحدة بلا اختلافات ظاهرية.

🏟️ الأصل التاريخي:
- انتشر بشكل رمزي في إيطاليا خلال السبعينات داخل الكورفات (Curva Sud ميلان/Curva Nord إنتر)، ثم تبنّته مجموعات البلقان (Delije/BBB) وانتقل لباقي أوروبا.

🔥 الفلسفة والرمزية:
- المساواة والذوبان في المجموعة: “لا فرد فوق الكل”.
- التحمل والقوة (خصوصًا في البرد): استعداد للتضحية من أجل الألوان.
- كسر الرسميات والمظاهر: التشجيع قيمة ومعنى، مش ماركات ولباس.

🧭 ملاحظات تنظيمية:
- التزام نفس التوقيت والإشارة من الكابو.
- احترام الموجودين (ما نغطيش على رؤية الآخرين، ما ندفشش).
- التصوير مسموح/ممنوع حسب سياسة المجموعة — الانضباط أولًا.
"""

TEXT_TIFO = """🎨 أسلوب: التيفو (Tifo)

📜 الوصف المفصل:
- عرض بصري كبير (قماش مرسوم/لوحات ورقية/بلاستيك ملون/3D/رول-أب) يغطي التريبون في ثوانٍ.
- أنواع معروفة: Card Stunt (أوراق)، Tela (قماش مرسوم)، Coreografia 3D، Roll-down (يافطة تُسدل عموديًا).

🏟️ الأصل التاريخي:
- إيطاليا (الستينات/السبعينات) نقطة الانطلاق. انتقل لفرنسا وألمانيا ثم للعالم، وتطوّر تقنيًا (تصميم رقمي، طباعة عريضة).

🔥 الفلسفة والرمزية:
- “فن الالتراس”: رسالة بصرية ذكية تُبهِر وتوجّه المعنى (وفاء/تحدي/سخرية/تاريخ).
- إثبات تنظيم المجموعة وقدرتها على العمل الصامت الطويل قبل 90 دقيقة من الحقيقة.

🧭 ملاحظات تنظيمية:
- تصميم واضح من بعيد (تباين ألوان قوي، كتابة قليلة وكبيرة).
- بروفة (تجربة) لتوزيع القطع وتوقيت الرفع والطي.
- احترام قوانين الملعب (مخارج الطوارئ/السلامة) والتنسيق مع المسؤولين إن لزم.
"""

TEXT_FLAG = """🚩 أسلوب: الأعلام والدروبو (Drappo/Bandiere)

📜 الوصف المفصل:
- حركة مستمرة للأعلام الصغيرة والمتوسطة، مع Big Flag يغطي قطاعات كاملة أحيانًا.
- أشكال: علم عصا واحدة، علم عصاتين (Due Aste)، رايات طويلة على الحبال.

🏟️ الأصل التاريخي:
- الجذور من أمريكا الجنوبية (خاصة الأرجنتين) ثم نقلها الطليان إلى أوروبا في السبعينات.

🔥 الفلسفة والرمزية:
- الألوان = الهوية الحية. كل اهتزاز علم يعني “المدرج يتنفس”.
- Big Flag يُظهِر الهيمنة والكتلة المنظمة.

🧭 ملاحظات تنظيمية:
- توزيع “Flagmen” عبر الصفوف حتى ما يكونش تركيز الحركة في نقطة واحدة.
- مراعاة الرؤية لمن خلفك (خفض العلم بين الفينة والأخرى).
- تثبيت جيد للعصي القابلة للطي لتجنّب الحوادث.
"""

TEXT_PYRO = """🔥 أسلوب: البايروتكنيك (Pyro)

📜 الوصف المفصل:
- مؤثرات ضوئية/دخانية مثل: الشماريخ (Flares)، الدخان الملون (Smoke)، الومضات.
- تُستخدم في لحظات دخول اللاعبين، الهدف، أو ختام المباراة لإعطاء “مشهد ملحمي”.

🏟️ الأصل التاريخي:
- رسّخته مجموعات البلقان (صربيا/كرواتيا/اليونان) في الثمانينات كجزء من ثقافة “الرهبة”.

🔥 الفلسفة والرمزية:
- “الملعب ساحة معركة”: النار ترمز للشغف والثورة والتمرد.
- تضخيم الإحساس بالخطر المسيطر (رهبة للخصم، قوة للمجموعة).

🧭 ملاحظات تنظيمية هامة:
- احترم القوانين المحلية وقواعد الملعب — هذه نقطة مبدئية.
- لا تعليمات إشعال/تهريب هنا؛ التركيز ثقافي/رمزي فقط.
- الحفاظ على مسافات آمنة وعدم توجيه الدخان نحو العائلات/اللاعبين.
"""

TEXT_SOUND = """🥁 أسلوب: الإيقاعات والأغاني

📜 الوصف المفصل:
- طبول تحدد الوتيرة + أبواق تُعلن الذروة + أغاني بطبقات (سريعة/بطيئة “Lento” تتصاعد تدريجيًا).
- أساليب: Call & Response (نداء/رد)، كورال طويل بنفس واحد، هتاف مع قفز.

🏟️ الأصل التاريخي:
- أمريكا اللاتينية (Samba/Murga) ثم أوروبا عبر إيطاليا (Roma/Napoli).

🔥 الفلسفة والرمزية:
- خلق “نبض” واحد للمدرج — لا أصوات مشتتة.
- الأغنية الطويلة = صبر وثبات حتى آخر دقيقة.

🧭 ملاحظات تنظيمية:
- قائد إيقاع ملاصق للكابو لتوحيد التبديلات.
- مفردات نظيفة وذكية (هوية/فخر/روح قتالية بلا إساءة شخصية).
- توزيع الطبول حتى ما “تغرقش” جهة على حساب أخرى.
"""

TEXT_MOVE = """🙌 أسلوب: الحركات الجماعية (Movimenti)

📜 الوصف المفصل:
- Jump Jump (قفز بإيقاع واحد)، Ondata (الموجة العابرة للمدرج)، رفع أيادي متزامن، Silenzio (صمت مفاجئ ثم انفجار).
- تعتمد على إشارات يدوية واضحة من الكابو/قادة الصفوف.

🏟️ الأصل التاريخي:
- Jump من Barras Bravas بالأرجنتين، الموجة عالميًا من مونديال المكسيك 1986، الصمت الدرامي من الكورفات الإيطالية.

🔥 الفلسفة والرمزية:
- الانضباط بصريًا = “جيش جماهيري” يتحرك كوحدة.
- الصمت ثم الانفجار يضرب الخصم نفسيًا.

🧭 ملاحظات تنظيمية:
- تقسيم التريبون إلى قطاعات يقودها “Sector Leaders”.
- تجنب الحركات اللي تسبّب دفع/سقوط — السلامة أوّلًا.
"""

TEXT_CAPO = """🎤 أسلوب: الكابو (Capo Ultras)

📜 الوصف المفصل:
- قائد التشجيع أمام المدرج، بميكروفون/مكبر، يشير باليد، يوزع أدوار الطبول، يعلن التبديلات بين الأغاني والحركات.
- قد يوجد “Capo Secondo” احتياط + فريق دعم (Drummers/Flagmen).

🏟️ الأصل التاريخي:
- ظهر في إيطاليا بداية السبعينات كحل للفوضى الصوتية.

🔥 الفلسفة والرمزية:
- الكابو = “العقل المُنظِّم” وصوت المجموعة.
- الالتزام بإشارته دليل نضج وانضباط.

🧭 ملاحظات تنظيمية:
- منصة الكابو ثابتة وآمنة، لا تعيق الرؤية/الخروج.
- لغة جسد واضحة وإشارات متفق عليها (تسريع/خفض/صمت/قفز).
"""

TEXT_CORTEO = """🚶 أسلوب: الكورتيـو (Corteo)

📜 الوصف المفصل:
- مسيرة جماهيرية قبل المباراة من نقطة تجمع نحو الملعب، بأعلام وطبول وهتافات.
- يُرافقها غالبًا لافتة أمامية باسم المجموعة وهوية المدينة/الحي.

🏟️ الأصل التاريخي:
- Barras Bravas بالأرجنتين، ثم اعتمدته المجموعات الإيطالية وانتشر أوروبيًا.

🔥 الفلسفة والرمزية:
- “نحن هنا” — إعلان وجود قبل دخول الاستاد.
- شحن الفريق والجماهير مبكرًا واستعراض التنظيم.

🧭 ملاحظات تنظيمية:
- احترام المرور/الجيران والتنسيق إن لزم.
- بروفا للمسار والزمن، ونقطة تلاقي بديلة عند الطوارئ.
"""

TEXT_BANNER = """💡 أسلوب: اللافتات والرسائل (Striscioni/Banners)

📜 الوصف المفصل:
- رسائل مكتوبة (قصيرة/ذكية/مباشرة) تُرفع في توقيت محدد.
- أنواع: دعم/عتاب/سخرية/تاريخ/قيم/قضايا جمهور.

🏟️ الأصل التاريخي:
- إيطاليا السبعينات، مع مدارس قوية (Roma/Lazio/Milan/Inter).

🔥 الفلسفة والرمزية:
- “الكلمة سلاح”: الرسالة تصنع موقف المجموعة وتؤرّخ ذاكرتها.
- الذكاء اللغوي يميّز المجموعة عن “الضجيج”.

🧭 ملاحظات تنظيمية:
- خط واضح، تباين قوي، كلمات أقلّ لتُقرأ من بعيد.
- تجنب الإساءة الشخصية/العنصرية/ما يخالف قوانين الملعب.
"""

TEXT_PLAYERS = """🤝 أسلوب: التواصل مع اللاعبين (Saluto/Pozze)

📜 الوصف المفصل:
- بعد المباراة (بيت أو خارج الديار)، يأتي اللاعبون أمام المدرج: تصفيق متبادل، “Viking Clap” أو هتاف موحّد، وأحيانًا استماع لرسالة/عتاب.

🏟️ الأصل التاريخي:
- تشدد في البلقان (Delije/BBB) وانتشر أوروبيًا كطقس ثابت.

🔥 الفلسفة والرمزية:
- الفريق والجمهور “كيان واحد”: مكافأة عند القتال، وعتاب محترم عند التقصير.
- يرسّخ فكرة أن النادي ملك جماهيره.

🧭 ملاحظات تنظيمية:
- لا تجاوز للخطوط: احترام اللاعبين والجهاز، لا اقتحام.
- وضوح: ما المطلوب؟ (تحية/رسالة قصيرة/وعد بالقتال القادم).
"""
# -----------------------------------------------------------------------------
# مبادئ الألتراس — أمر جديد /principles
# -----------------------------------------------------------------------------
TEXT_PRINCIPLES = """الولاء الاول والاخير لله وحده لا شريك له

قواعد ومبادئ الألتراس:
تتمركز قواعد مبادئ الألتراس حول التشجيع المتواصل والوقوف طوال المباراة, والولاء الكامل للفريق, وتغطية جميع مبارياته بغض النظر عن المسافة والتكلفة, وتنظيم هتافاتهم وتشكيلاتهم داخل مدرجات الملعب, والحفاظ على خصوصية المجموعة, والتمويل الذاتي, والولاء لمكان جلوس محدد في المدرج يعرف بـ "الكورفا".

- التشجيع المستمر:
  عدم التوقف عن الغناء والهتاف والتشجيع طوال مدة المباراة سواء كان الفريق منتصرا ام مهزوما, للحفاظ على معنويات اللاعبين ورونق المدرجات. 

- الوقوف المستمر:
  عدم الجلوس مطلقا اثناء المباريات, لان الغرض الاساسي هو المؤازرة المتواصلة وليس مجرد المشاهدة. 

- الولاء الشامل للفريق:
  حضور جميع مباريات الفريق, الداخلية والخارجية, بغض النظر عن المسافة او التكلفة. 

- التنظيم في المدرجات:
  اختيار مكان محدد في مدرجات الملعب يعرف بـ "الكورفا" او "المنطقة العمياء", وهو مكان يتميز بوجود المشجعين الاساسيين وتتم قيادة الهتافات منه. 

- التنظيم المركزي للهتافات:
  وجود قائد تشجيع يسمى "الكابو" مسؤول عن تحديد الاغاني والهتافات وتوقيتها وحركات الايدي وتشكيلات المشجعين, وفقا للشخصية وثقافة النادي. 

- الحفاظ على خصوصية المجموعة:
  عدم الكشف عن اي معلومات عن اعضاء المجموعة لوسائل الاعلام, التي تعتبر عدوا تقليديا للألتراس, والحفاظ على العمل في الخفاء. 

- التمويل الذاتي:
  الاعتماد على التمويل الذاتي من خلال بيع منتجات خاصة بالمجموعة, مثل القمصان, ومدفوعات الاعضاء, وعدم قبول اي مساعدات مالية من مصادر خارجية. 

- الولاء للمجموعة:
  الانتماء لفريق واحد فقط وعدم الانضمام الى مجموعات اخرى, حتى لو كانت تشجع نفس الفريق. 

- الحفاظ على الباش:
  الالتزام بالحفاظ على "الباش" (قطعة قماش مميزة تحمل شعار المجموعة) وعدم السماح بسرقتها, لان المجموعة التي تتعرض باشها الرسمي للسرقة تعلن حل نفسها فورا.
"""
TEXT_ACAB = """☠️ أسلوب/مفهوم: A.C.A.B (All Cops Are Bastards)

📜 الوصف المفصل:
اصبحنا و في الاخص في مدرجتنا نرى كلمة A.C.A.B تتداول في جل ردودنا و مشاركاتنا ان لم نقل كلها ,و الكثير منا لا يعرف معناها الحقيقي.

-في الحقيقة تعتبر كلمة A.C.A.B او عبارة All Cops Are Bastard
كلمة انجليزية (الهوليغانز) و تداولها بعدهم الايطاليون ثم شاعت فيما بعد في جل العالم . و قد تداول استعمالها عند ظهور ظاهرة الالترا.
-فيما يخص معنى الكلمة فهو الوقوف ضد الشرطة و معارضتها لانها (حسب الالتراس) تفسد ما يحاولون اصلاحه.
-لذلك يجب علينا ان نفهم الكلمة قبل ان نتدالها لانها في بعض الاحيان قد تصبح دليلا ضدنا قد نآخد عليه.

ALL COPS AR BASTARD
بمعناه الصريح 
كل رجال الشرطة ابناء......
و أتأسف على التعبير لكن هده هي الحقيقة 
و تم اختصارها في acab او 1312 
و استعملت لاول مرة في الارجنتين و خصوصا مع جماهير 
الريفر 
و البارابرافا هم اصل هده الكلمة و جاءت 
من داخل السجون من مجموعة من الاعضاء 
الباربرافا 
الدين حكم عليهم باحكام طويلة🏴‍☠️✊

"""


TEXT_البداية = """
مقتبس من Libcom.org 
"History of the Ultra movement in Italy"

ظهرت أولى مجموعات "الأولتراس"، وهم مشجعو كرة القدم الذين تتراوح أعمارهم بين 15 و25 سنة ويختلفون بوضوح عن النموذج الكلاسيكي للمشجع البالغ، في إيطاليا في نهاية الستينيات وبداية السبعينيات. تجمعوا في القطاعات الأرخص من الملاعب، وجذبتهم الأندية من خلال حملات اشتراكات مخفّضة، وأظهروا منذ البداية سلسلة من الخصائص الفريدة والجديدة تماماً على كرة القدم الإيطالية.
من ذلك شعور قوي بالانتماء إلى "إقليم" معيّن (جزء من المدرج يُحدد باللافتات التي تحمل اسم المجموعة أو رمزها)، بالإضافة إلى مظهر شبه عسكري مستوحى من الموضة السائدة لدى بعض التنظيمات السياسية المتطرفة آنذاك: معاطف باركا، أحذية "د. مارتنز"، بزّات عسكرية وسترات مموهة تُرتدى مع أوشحة ملوّنة بألوان الأندية.

في البداية تميّز الأولتراس قبل كل شيء بأسلوب جديد كلياً في دعم فرقهم، وبمعنى أوسع، في المشاركة بالمباراة. من جماهير البرازيل تورcidas جاء استخدام الطبول والأبواق، ومن مشجعي إنجلترا جاء "تأثير الأوشحة" (رفع آلاف الأوشحة واهتزازها بشكل جماعي لتشكيل مشهد بصري مهيب يشبه البحر)، إضافة إلى الأهازيج والهتافات المتكررة لإلهام اللاعبين أو إخافة الخصوم. هكذا أصبح التشجيع يُعتبر جزءاً من الإستراتيجية والتكتيك للفوز بالمباراة: "اللاعب الثاني عشر".
كما استخدموا الألعاب النارية بكثرة (مشاعل يدوية، قنابل دخانية، صواريخ، أضواء بنغال ملونة) لإضفاء لمسة إضافية من الحيوية على المدرجات. ومن هنا وُلد مفهوم "كوريوغرافيا المدرجات"، وهو ممارسة أصلية تماماً تطورت مع ازدياد تنظيم المجموعات. وأصبحت الكوريوغرافيا علامة مميزة للأسلوب الإيطالي: عروض هائلة، ملونة، وخيالية لدرجة ألهمت حتى صحيفة "لوموند" الفرنسية من مدرج جنوى الشمالي، أو من "كورفا فييزولي" بفلورنسا التي أعادت رسم معالم المدينة وفق الخريطة الأصلية.

أقدم مجموعة أولتراس كانت "فوسا دي ليوني" (عرين الأسود) لميلان، تأسست عام 1968 وأخذت اسمها من الملعب القديم للنادي. لكن بعض المجموعات سبقتها، مثل "فيدليسيـمي غراناتا" التي تأسست في تورينو عام 1951 وما زالت موجودة في "كورفا الماراتونا". ظهرت أولتراس سامبدوريا عام 1969 (أول من استخدم اسم "أولتراس")، ثم جاءت مجموعة "البويز" من إنتر.
شهدت السبعينيات تجمع العشرات من المجموعات الصغيرة لتشكيل كيانات أكبر مثل:

لواء الأصفر والأزرق (فيرونا)

نادي فيولا فييسو (فيورنتينا – 1971)

أولتراس نابولي (1972)

لواء الأحمر والأسود لميلان

عرين الغريفون لجنوى

غراناتا أولتراس تورينو (1973)

فور إيفر أولتراس بولونيا (1975)

مقاتلو يوفنتوس (1975)

لواء الأزرق والأسود أتالانتا (1976)

مشجعو النسور لاتسيو

كوماندو أولتراس كورفا سود روما (CUCS) (1977).


بعضها انشقّ عن أندية المشجعين القديمة (مثل "البويز" من نادي فوساتي للإنتر، و"غراناتا" من فيدليسيـمي تورينو). أخرى نشأت من اتحاد مجموعات أصغر (مثل مقاتلي يوفنتوس الذين جاؤوا من "البانثرز").
كثير من المجموعات كانت مرتبطة بأحياء معينة أو تجمعات شبابية في المقاهي والمدارس وصالات الألعاب. وكان العديد من أعضائها منخرطين مسبقاً في حركات سياسية متطرفة، حيث أخذوا منها إحساس الانتماء والتضامن والتمرّد على السلطات.

شيئاً فشيئاً، أخلت روابط المشجعين "العادية" أماكنها في المدرجات، ليحتلها الأولتراس بلافتاتهم التي تحمل غالباً رموز الحيوانات المفترسة (أسود، نمور، فهود)، أو جمجمة القرصان، أو أسلحة، وحتى صور مستوحاة من فيلم A Clockwork Orange.
تمويل الأنشطة كان يتم بالتبرعات بين الأعضاء: شراء جلود للطبول، أعمدة للرايات، علب طلاء، أو تنظيم رحلات التنقّل لمتابعة الفريق.

لكن مع بروز الأولتراس تغيّر وجه الشغب. فبينما قلّت حوادث اجتياح الملاعب أو مطاردة الحكام، ازداد العنف بين المجموعات. منذ 1974، سُجّلت اشتباكات كبرى (تورينو – سامبدوريا، روما – لاتسيو). أُلقيت أجسام على أرضية الملعب، ودخلت الشرطة بالغازات المسيلة للدموع، وتحولت المواجهات أحياناً إلى "حرب شوارع" خارج الملاعب.

من أبرز الأحداث:

طعن في مباراة لاتسيو – نابولي، ثم حادث مشابه في ميلان – يوفنتوس (1975).

اشتباكات بالحديد في مباراة أتالانتا – تورينو (1977).

شجار بالسكاكين بين "البويز" (إنتر) و"اللواء الأحمر والأسود" (ميلان).

مأساة 28 أكتوبر 1979: مقتل المشجع لازيو "فينشينزو باباريلي" بصاروخ أُطلق من مشجع لروما خلال الديربي.


هذا الحدث المأساوي، مع حوادث أخرى في نفس اليوم (أسكولي – بولونيا، إنتر – ميلان، بريشيا – كومو) هزّ الرأي العام وأجبر السلطات على فرض قيود صارمة: حظر الطبول والأعلام الكبيرة والرموز الحربية لعدة أشهر.

في الثمانينيات، توسعت حركة الأولتراس بقوة. لم يعد الأعضاء بالعشرات بل بالمئات والآلاف. أصبح لكل فريق تقريباً، شمالاً وجنوباً، مجموعة أو أكثر. وظهرت تحالفات كبرى (روما – أتالانتا – يوفنتوس، لاتسيو – باري – تورينو، إنتر – فيورنتينا – سامبدوريا، ميلان – جنوى – بولونيا). لكن معظم هذه التحالفات انهارت لاحقاً لتحل محلها عداوات جديدة.

عام 1982، خلال كأس العالم في إسبانيا، ظهرت لافتات الأولتراس في النهائي ضد ألمانيا، لكنها كانت المرة الوحيدة تقريباً التي اتحدت فيها الجماهير الإيطالية على المستوى الوطني، بعكس إنجلترا أو ألمانيا أو هولندا. السبب يكمن في العداوات التاريخية بين المدن الإيطالية.

في تلك الفترة، أصبح "التنقّل" (الترانسفير) هو الحدث المركزي للأولتراس، اختباراً للوفاء والشجاعة. بدون راية، يعتبر المرء جباناً. اضطرت سكك الحديد إلى تسيير "قطارات خاصة" للمشجعين. تنافست المجموعات على إبهار المدرجات بعروض ضخمة: لافتة 90×32 متر لسامبدوريا، عشرة آلاف بطاقة ملونة لروما، مئات الأقمشة الحمراء والبيضاء لتورينو، وآلاف لفائف الورق لنابولي.

لكن بالتوازي، تصاعدت أعمال العنف: انتشار السكاكين في ميلان وروما، اشتباكات بالأيدي في بيرغامو.
1984: مقتل مشجع "ستيفان فورلان" بعد تعرضه للضرب من الشرطة في مباراة ترييستي – أودينيزي. بعد 8 أشهر، طُعن "ماركو فونغيسي" حتى الموت بعد مباراة ميلان – كريمونيزي.

في الثمانينيات أيضاً، تراجعت العلاقة بين الأولتراس والسياسة. ظهرت صداقات بين مجموعات متباينة أيديولوجياً (مثل فيورنتينا – فيرونا). لكن برز عامل جديد: المخدرات. اختفى مدمنو الهيروين بفعل التفتيش الأمني، لكن تدخين الحشيش انتشر بقوة، حتى صارت أوراق الماريجوانا رموزاً على الرايات.

بحلول منتصف الثمانينيات، كان الأولتراس في أوج قوتهم: عشرات الآلاف من الأعضاء، هيكلية هرمية، وبعضهم يملك إدارة متقدمة (مثل "كوماندو أولتراس كورفا B" في نابولي، بقاعدة بيانات للأعضاء، صحيفة خاصة، قناة تلفزيونية...).

في التسعينيات، واجهت الحركة أزمة هوية. الجيل الجديد لم يعد يحمل نفس القيم القديمة. بات "كونك أولتراس" موضة. لكن في الوقت نفسه ظهرت محاولات لإعادة التماسك، لأنهم صاروا جزءاً لا يتجزأ من منظومة كرة القدم ومؤثرين في إستراتيجيات الأندية.
غير أن النصف الثاني من التسعينيات شهد صدمة كبرى: مقتل المشجع فينتشينزو سبانيولو (جنوى، 1995). هذا الحدث هدد بقاء الحركة، التي كانت بالفعل تعاني بسبب:

تشتت المجموعات إلى فصائل صغيرة.

صعود ما يسمى "الكلاب الضالة" (مشجعون غير منظمين).

حلّ بعض المجموعات العريقة، ما خلق فراغاً لجماهيرها.


من هنا جاء بيان "بستا لامي، بستا إنفامي" (كفى سكاكين، كفى خيانة) المستوحى من أولتراس بيرغامو بعقلية محافظة وقاسية.
"""

# جمع الكل لـ /all
TEXT_ALL = (
    TEXT_TORSO + "\n\n" + TEXT_TIFO + "\n\n" + TEXT_FLAG + "\n\n" + TEXT_PYRO + "\n\n" +
    TEXT_SOUND + "\n\n" + TEXT_MOVE + "\n\n" + TEXT_CAPO + "\n\n" +
    TEXT_CORTEO + "\n\n" + TEXT_BANNER + "\n\n" + TEXT_PLAYERS
)

# -----------------------------------------------------------------------------
# أوامر البوت
# -----------------------------------------------------------------------------
@bot.message_handler(func=lambda msg: msg.text == "☠️ A.C.A.B")
def acab_handler(message):
    send_long(message.chat.id, TEXT_ACAB)
@bot.message_handler(commands=['start', 'help'])
def start(message):
    chat_id = message.chat.id

    # إرسال الصورة أولاً
    try:
        with open("1756911515728.jpg", "rb") as photo:
            bot.send_photo(chat_id, photo, caption="👋 مرحبًا! هذا بوت موسوعة الألتراس بشروحات مفصلة.")
    except Exception as e:
        bot.send_message(chat_id, "⚠️ ماقدرتش نعرض الصورة.")

    # ← لوحة تحكم جديدة بشكل أجمل
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    keyboard.row("🩳 Torso", "🎨 Tifo")
    keyboard.row("🚩 Flag", "🔥 Pyro")
    keyboard.row("🥁 Sound", "🙌 Move")
    keyboard.row("🎤 Capo", "🚶 Corteo")
    keyboard.row("💡 Banner", "🤝 Players")
    keyboard.row("📚 All", "🛡️ Principles", "🎶 Songs", "⚽ Matches","☠️ A.C.A.B",
    "الانطلاقية🔓")

    bot.send_message(chat_id, "📜 اختر أمر من القائمة:", reply_markup=keyboard)

# =============================================
# الرد على أوامر النصوص من الكيبورد مع رموز
# =============================================
@bot.message_handler(func=lambda msg: msg.text == "الانطلاقية🔓")
def acab_handler(message):
    send_long(message.chat.id, TEXT_البداية)
    
@bot.message_handler(func=lambda msg: msg.text == "🩳 Torso")
def torso(message):
    send_long(message.chat.id, TEXT_TORSO)

@bot.message_handler(func=lambda msg: msg.text == "🎨 Tifo")
def tifo(message):
    send_long(message.chat.id, TEXT_TIFO)

@bot.message_handler(func=lambda msg: msg.text == "🚩 Flag")
def flag(message):
    send_long(message.chat.id, TEXT_FLAG)

@bot.message_handler(func=lambda msg: msg.text == "🔥 Pyro")
def pyro(message):
    send_long(message.chat.id, TEXT_PYRO)

@bot.message_handler(func=lambda msg: msg.text == "🥁 Sound")
def sound(message):
    send_long(message.chat.id, TEXT_SOUND)

@bot.message_handler(func=lambda msg: msg.text == "🙌 Move")
def move(message):
    send_long(message.chat.id, TEXT_MOVE)

@bot.message_handler(func=lambda msg: msg.text == "🎤 Capo")
def capo(message):
    send_long(message.chat.id, TEXT_CAPO)

@bot.message_handler(func=lambda msg: msg.text == "🚶 Corteo")
def corteo(message):
    send_long(message.chat.id, TEXT_CORTEO)

@bot.message_handler(func=lambda msg: msg.text == "💡 Banner")
def banner(message):
    send_long(message.chat.id, TEXT_BANNER)

@bot.message_handler(func=lambda msg: msg.text == "🤝 Players")
def players(message):
    send_long(message.chat.id, TEXT_PLAYERS)

@bot.message_handler(func=lambda msg: msg.text == "🛡️ Principles")
def principles(message):
    send_long(message.chat.id, TEXT_PRINCIPLES)

@bot.message_handler(func=lambda msg: msg.text == "📚 All")
def all_cmd(message):
    send_long(message.chat.id, TEXT_ALL)
   
@bot.message_handler(func=lambda msg: msg.text == "🎶 Songs")
def songs_text_handler(message):
    # إعادة استخدام نفس دالة /songs
    songs_cmd(message)
@bot.message_handler(func=lambda msg: msg.text == "⚽ Matches")
def show_next_match(message):
    chat_id = message.chat.id
    match = next_match_manual()
    if match:
        msg_text = (
            f"⚽ المباراة القادمة لفريق الحراش:\n"
            f"الفريق الخصم: {match['opponent']}\n"
            f"التاريخ: {match['date'].strftime('%Y-%m-%d %H:%M')}\n"
            f"المكان: {match['location']}"
        )
        bot.send_message(chat_id, msg_text)
    else:
        bot.send_message(chat_id, "لا توجد مباريات مستقبلية محددة حالياً.")
# -----------------------------------------------------------------------------
# قسم الأغاني (mp3) — اختيارية عبر كيبورد
# -----------------------------------------------------------------------------
SONGS = {  
    "UYC-La Vida Ultras💪🏻💛": "La Vida Ultras.mp3",  
    "UYC-7naya rjala machi mnwala💪🏻💛": "7naya rjala machi mnwala.mp3",  
    "UYC-Amour Kbir💪🏻💛": "amourkbir.mp3",  
    "UC20-Identité⚒️🖤": "identité.mp3",  
    "UC20-Samdin⚒️🖤": "samdin .mp3",  
    "UC20-Mersoul⚒️🖤": "Mersoul .mp3",  
    "UC20-Mitheq⚒️🖤": "mitheq.mp3",  
    "UC-20 dalé dalé⚒️🖤": "derb twil.mp3",
    "UGG ya sfra hkaytk💪🏻🖤":"ya safra.mp3",
    "UC-20 talt lghiba⚒️🖤":"talt lghiba.mp3",
   "UC-20 dar lkbira⚒️🖤":"El Dar Lekbira.mp3",
   "UC-20 djaya⚒️🖤":"djaya.mp3",
   "UC20-Lqadiya⚒️🖤":"lqadiya.mp3",
   "UC20-Had nadi⚒️💛":"had nadi.mp3",
   "UC20-Nsmat l3oufia⚒️💛": "l3oufia.mp3",
   "UC20-7lalek⚒️💛":"7lalk.mp3",
   "UC20-Jil jdid⚒️💛":"jil jdid.mp3",
   "UC-20khouna ya7iya🫡(دعواتكم له بالرحمة)":"yahia.mp3",
   "UC-20💔⚒️Cicatrices":"Cicatrices.mp3"}

@bot.message_handler(commands=['songs'])
def songs_cmd(message):
    chat_id = message.chat.id

    # إرسال صورة قبل قائمة الأغاني
    try:
        with open("songs_image.jpg", "rb") as photo:
            bot.send_photo(chat_id, photo, caption="🎶 إليك قائمة الأغاني:")
    except Exception:
        bot.send_message(chat_id, "⚠️ ماقدرتش نعرض الصورة.")

    # إنشاء كيبورد الأغاني + زر العودة
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
    for song in SONGS.keys():
        keyboard.add(song)
    keyboard.add("↩️ رجوع")  # زر العودة

    bot.send_message(chat_id, "اختر أغنية من القائمة:", reply_markup=keyboard)


@bot.message_handler(func=lambda msg: msg.text in SONGS.keys())
def send_song(message):
    filename = SONGS[message.text]
    try:
        with open(filename, "rb") as f:
            bot.send_audio(message.chat.id, f, title=message.text)
    except Exception:
        bot.send_message(message.chat.id, f"⚠️ الملف {filename} ما تلقاش!")


# هاندلر خاص بزر العودة
@bot.message_handler(func=lambda msg: msg.text == "↩️ رجوع")
def back_to_menu(message):
    chat_id = message.chat.id
    keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    buttons = [  
    "🩳 Torso", "🎨 Tifo", "🚩 Flag", "🔥 Pyro",  
    "🥁 Sound", "🙌 Move", "🎤 Capo", "🚶 Corteo",  
    "💡 Banner", "🤝 Players", "📚 All", "🛡️ Principles",  
    "🎶 Songs", "⚽ Matches",
"☠️ A.C.A.B" ,
"الانطلاقية🔓"]
    keyboard.add(*buttons)
    bot.send_message(chat_id, "📜 رجعت للقائمة الرئيسية:", reply_markup=keyboard)

# -----------------------------------------------------------------------------
# تشغيل البوت
# -----------------------------------------------------------------------------
if __name__ == "__main__":
    print("🤖 البوت راهو يخدم...")
    bot.polling(none_stop=True)